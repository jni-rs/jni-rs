language: rust
rust:
    - stable
    - beta
    - nightly

matrix:
  allow_failures:
    - rust: nightly

before_script:
  - export RUST_BACKTRACE=1

script:
  - cargo build

  - # Run all tests with Java 8 (the current LTS release).
  - jdk_switcher use oraclejdk8
  - ./run_integration_tests.sh

  - # Run all tests with Java 9 (the latest release).
  - jdk_switcher use oraclejdk9
  - ./run_integration_tests.sh
